<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>貸し部屋予約</title>
  <link rel="icon" href="icon.png">
  <link rel="stylesheet" href="css/style.css?v=20260201">
</head>
<body>
  <div class="container">
    <h1>貸し部屋予約申請</h1>
    <p class="subtitle">
      指定のdocxファイルをアップロードしてください<br>
      <button type="button" id="openfile" class="template-btn">テンプレートのダウンロード</button>
    </p>

    <form action="submit.php" method="post" class="form" enctype="multipart/form-data">
      <div class="form-group">
        <label for="email">メールアドレス <span class="required">*</span></label>
        <input type="email" name="email" id="email" 
          placeholder="s(学籍番号)@bene.fit.ac.jp または (団体名)@bene.fit.ac.jp"
          pattern="^[^@]+@bene\.fit\.ac\.jp$"
          title="@bene.fit.ac.jpのメールアドレスのみ使用できます"
          required>
      </div>

      <div class="form-group">
        <label for="file">docxファイルを添付 <span class="required">*</span></label>
        <input type="file" name="file" id="file" accept=".docx" required>
      </div>

      <div class="form-group">
        <label for="text">備考</label>
        <input type="text" name="text" id="text" placeholder="再提出の理由などを詳細に記入してください">
      </div>

      <button type="submit" class="submit-btn">予約申請</button>
    </form>
    <p class="copyright">
      &copy; 2026 総合管理事務局. All rights reserved.
    </p>
  </div>

  <dialog id="fileDialog">
      <a href="template_file/template.docx" class="link" target="_blank">多目的室借用申請書をダウンロード</a>
      <a href="template_file/template_orange.docx" class="link" target="_blank">オレンジの部屋借用申請書をダウンロード</a>
  </dialog>

  <script>
    const dlg = document.getElementById("fileDialog");
    document.getElementById("openfile").addEventListener("click", () => dlg.showModal());
    dlg.addEventListener("click", (e) => {
      const r = dlg.getBoundingClientRect();
      const x = e.clientX, y = e.clientY;

      const inside =
        r.left <= x && x <= r.right &&
        r.top  <= y && y <= r.bottom;

      if (!inside) dlg.close();
    });
  </script>

</body>
</html>
